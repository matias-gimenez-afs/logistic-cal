<div class="dv-section-container">
  <h2 class="section-title">Certificaciones y seguimiento</h2>
  <p class="section-subtitle">
    Edit√° los estados de certificaciones y el seguimiento de mails para cada
    participante.
  </p>

  <div class="filters">
    <!-- Filtro por EV -->
    <mat-form-field appearance="outline">
      <mat-label>Filtrar por EV</mat-label>
      <mat-select [(ngModel)]="filtroEV" (selectionChange)="aplicarFiltros()">
        <mat-option value="">Todas las EVs</mat-option>
        <mat-option *ngFor="let ev of evsUnicas" [value]="ev">{{
          ev
        }}</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Filtro por Seguimiento de Emails -->
    <mat-form-field appearance="outline">
      <mat-label>Filtrar por Seguimiento</mat-label>
      <mat-select
        [(ngModel)]="filtroSeguimiento"
        (selectionChange)="aplicarFiltros()"
      >
        <mat-option value="">Todos los estados</mat-option>
        <mat-option
          *ngFor="let estado of opcionesSeguimiento"
          [value]="estado"
          >{{ estado }}</mat-option
        >
      </mat-select>
    </mat-form-field>
  </div>

  <div class="table-container">
    <table
      mat-table
      [dataSource]="participantesFiltrados"
      class="full-width-table"
      multiTemplateDataRows
    >
      <!-- Columnas existentes... -->
      <!-- EV -->
      <ng-container matColumnDef="ev">
        <th mat-header-cell *matHeaderCellDef>EV</th>
        <td mat-cell *matCellDef="let p">{{ p.ev }}</td>
      </ng-container>

      <!-- Nombre -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef>Nombre</th>
        <td mat-cell *matCellDef="let p">{{ p.nombre }}</td>
      </ng-container>

      <!-- Apellido -->
      <ng-container matColumnDef="apellido">
        <th mat-header-cell *matHeaderCellDef>Apellido</th>
        <td mat-cell *matCellDef="let p">{{ p.apellido }}</td>
      </ng-container>

      <!-- Foundations -->
      <ng-container matColumnDef="foundations">
        <th mat-header-cell *matHeaderCellDef>Foundations</th>
        <td mat-cell *matCellDef="let p">
          <mat-form-field appearance="outline">
            <mat-select
              [(ngModel)]="p.foundations"
              (selectionChange)="guardar(p)"
            >
              <mat-option
                *ngFor="let estado of estadosCertificacion"
                [value]="estado"
              >
                {{ estado }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <!-- 101 -->
      <ng-container matColumnDef="curso101">
        <th mat-header-cell *matHeaderCellDef>101</th>
        <td mat-cell *matCellDef="let p">
          <mat-form-field appearance="outline">
            <mat-select [(ngModel)]="p.curso101" (selectionChange)="guardar(p)">
              <mat-option
                *ngFor="let estado of estadosCertificacion"
                [value]="estado"
              >
                {{ estado }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <!-- Cert Hosting -->
      <ng-container matColumnDef="certHosting">
        <th mat-header-cell *matHeaderCellDef>Cert. Hosting</th>
        <td mat-cell *matCellDef="let p">
          <mat-form-field appearance="outline">
            <mat-select
              [(ngModel)]="p.certHosting"
              (selectionChange)="guardar(p)"
            >
              <mat-option
                *ngFor="let estado of estadosCertificacion"
                [value]="estado"
              >
                {{ estado }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <!-- Cert Sending -->
      <ng-container matColumnDef="certSending">
        <th mat-header-cell *matHeaderCellDef>Cert. Sending</th>
        <td mat-cell *matCellDef="let p">
          <mat-form-field appearance="outline">
            <mat-select
              [(ngModel)]="p.certSending"
              (selectionChange)="guardar(p)"
            >
              <mat-option
                *ngFor="let estado of estadosCertificacion"
                [value]="estado"
              >
                {{ estado }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <!-- Seguimiento Mails -->
      <ng-container matColumnDef="seguimientoMails">
        <th mat-header-cell *matHeaderCellDef>SEGUIMIENTO MAILS</th>
        <td mat-cell *matCellDef="let p">
          <mat-form-field appearance="outline">
            <mat-select
              [(ngModel)]="p.seguimientoMails"
              (selectionChange)="guardar(p)"
            >
              <mat-option *ngFor="let op of opcionesSeguimiento" [value]="op">
                {{ op }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnas"></tr>
      <tr mat-row *matRowDef="let row; columns: columnas"></tr>
    </table>
  </div>
</div>
